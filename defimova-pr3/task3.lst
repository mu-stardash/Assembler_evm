GAS LISTING task3.S 			page 1


   1              	/*
   2              	 * ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð²Ð²Ð¾Ð´Ð° ÐºÐ¾Ð´Ð¾Ð² Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð² Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¸ Ð²Ñ‹
   3              	 */
   4              	
   5              	.include "my-macro"
   1              	/* 
   2              	 * ÐœÐ°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹.
   3              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
   4              	 * 	- ÐºÐ¾Ð´ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
   5              	 *
   6              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
   7              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              		movl $1, %eax 		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° exit Ð½Ð¾Ð¼ÐµÑ€ 1
  11              		movl \ret_val, %ebx 	# ÐºÐ¾Ð´ Ð²Ñ‹Ñ…Ð¾Ð´Ð°
  12              		int $0x80 		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  13              	.endm
  14              	
  15              	
  16              	/*
  17              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐ¸Ð
  18              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  19              	 * 	- Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„Ñ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  20              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  21              	 *	- Ð² %eax ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
  22              	 *	- Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ buf_addr - ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð»
  23              	 * 
  24              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  25              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 read'
  26              	*/
  27              	.macro Getchar buf_addr
  28              		movl $3, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° read
  29              		movl $0, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð°
  30              		movl \buf_addr, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° (Ð¾Ð½ Ð¶Ðµ - Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐº
  31              		     			# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°)
  32              		movl $1, %edx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ
  33              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  34              	.endm
  35              	
  36              	/*
  37              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² ÑÑ‚Ð°Ð½Ð´
  38              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  39              	 * 	- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°.
  40              	 *
  41              	 * ÐŸÑ€Ð¸Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°:
  42              	 *	Puts "Ð¢ÐµÐºÑÑ‚ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸" 
  43              	 *
  44              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  45              	 *	- Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð² ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾Ðº
  46              	 *	  Ð° Ñ‚Ð°ÐºÐ¶Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸
  47              	 *	
  48              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  49              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man puts', 'man 2 write'
  50              	*/
  51              	.macro Puts string
  52              	.data
GAS LISTING task3.S 			page 2


  53              	    str\@: 	.ascii "\string\n"  # Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð´Ð»
  54              		
  55              	    strlen\@ = 	. - str\@           # Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð´Ð»Ð¸Ð½Ñ‹ ÑÑ‚Ñ€Ð¾ÐºÐ¸
  56              	
  57              	.text
  58              		movl $4, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° write
  59              		movl $1, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð²Ð¾Ð´Ð°	
  60              		movl $str\@, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾
  61              		movl $strlen\@, %edx 	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
  62              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  63              	.endm
  64              	
   6              	
   7              	.bss
   8              	    .lcomm buf, 10 # Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð². Ð 
   9              	    .lcomm c, 1	# Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°. Ð Ð°Ð·Ð¼ÐµÑ€ - 1 
  10              		
  11              	.text
  12              	.global _start
  13              	
  14              	_start:
  15:task3.S       ****     sub	%esi, %esi     # ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð°Ð´Ñ€ÐµÑÐ° Ð±Ð°Ð¹Ñ‚Ð° Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð
  16              	    
  17              	show_prompt:
  18:task3.S       ****     Puts "Ð’Ð²Ð¾Ð´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ, Ð´Ñ€ÑƒÐ³ Ð¼Ð¾Ð¹!" 	# Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð² Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð
  18              	> .data
  18 ???? D092D0B2 	>  str0:.ascii "Ð’Ð²Ð¾Ð´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ, Ð´Ñ€ÑƒÐ³ Ð¼Ð¾Ð¹!\n"
  18      D0BED0B4 
  18      D0B8D182 
  18      D0B520D1 
  18      86D0B8D1 
  18              	>  
  18              	>  strlen0 =. - str0
  18              	> 
  18              	> .text
  18 ???? B8040000 	>  movl $4,%eax
  18      00
  18 ???? BB010000 	>  movl $1,%ebx
  18      00
  18 ???? B9000000 	>  movl $str0,%ecx
  18      00
  18 ???? BA2C0000 	>  movl $strlen0,%edx
  18      00
  18 ???? CD80     	>  int $0x80
  19              						# Ð²Ñ‹Ð²Ð¾Ð´ (Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ° Ð²Ð²Ð¾Ð´Ð°)
  20              	
  21              	kbd_input:
  22:task3.S       ****     Getchar $c          # Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð² Ð²Ð²Ð¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° ÑÐ¾ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð
  22 ???? B8030000 	>  movl $3,%eax
  22      00
  22 ???? BB000000 	>  movl $0,%ebx
  22      00
  22 ???? B9000000 	>  movl $c,%ecx
  22      00
  22              	>  
  22 ???? BA010000 	>  movl $1,%edx
  22      00
GAS LISTING task3.S 			page 3


  22 ???? CD80     	>  int $0x80
  23              	    
  24:task3.S       ****     cmpl $0, %eax 	# ÐšÐ¾Ð½ÐµÑ† Ñ„Ð°Ð¹Ð» - EOF (Ð²Ð²ÐµÐ´ÐµÐ½Ð¾ 0 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²) ? 
  25:task3.S       ****     je stop		# Ð”Ð° - Ð½Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
  26              	    
  27:task3.S       ****     cmpb $'\n', c 	# ÑÑ‚Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ ?
  28:task3.S       ****     je enter      	# Ð”Ð - Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð¸Ð¼ Ñ‡Ð¸ÑÐ»Ð¾, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð±Ñ‹Ð»Ð¾ Ð¿ÐµÑ€ÐµÐ´ ÑÐ¸Ð
  29:task3.S       ****     cmpb $'9', c  	# ÐºÐ¾Ð´ Ð±Ð¾Ð»ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '9' ?
  30:task3.S       ****     ja print_err_msg	# Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  31:task3.S       ****     cmpb $'0', c	# ÐºÐ¾Ð´ Ð¼ÐµÐ½ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '0' ?
  32:task3.S       ****     jb print_err_msg	# Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  33              	
  34:task3.S       ****     cmpl $10, %esi     	# Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ 10 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²?
  35:task3.S       ****     je print_err_buf	# Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¸
  36              		
  37:task3.S       **** 	movb c, %al         # ÐºÐ¾Ð´ Ð¸Ð· Ñ Ð¿Ð¸ÑˆÐµÐ¼ Ð² al
  38:task3.S       ****     movb %al, buf(%esi) # Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ al (Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ¸Ð¼Ð²Ð¾
  39              				# Ð°Ð´Ñ€ÐµÑÑƒ buf + esi (Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð²Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)
  40:task3.S       ****     incl %esi		# ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÐ»ÐµÐ´ÑƒÑŽ
  41              	
  42:task3.S       ****     Puts "Ð¦Ð¸Ñ„Ñ€Ð°! Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾." # Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¼ Ð²Ð²Ð¾Ð´
  42              	> .data
  42 ???? D0A6D0B8 	>  str2:.ascii "Ð¦Ð¸Ñ„Ñ€Ð°! Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾.\n"
  42      D184D180 
  42      D0B02120 
  42      D0A5D0BE 
  42      D180D0BE 
  42              	>  
  42              	>  strlen2 =. - str2
  42              	> 
  42              	> .text
  42 ???? B8040000 	>  movl $4,%eax
  42      00
  42 ???? BB010000 	>  movl $1,%ebx
  42      00
  42 ???? B9000000 	>  movl $str2,%ecx
  42      00
  42 ???? BA1A0000 	>  movl $strlen2,%edx
  42      00
  42 ???? CD80     	>  int $0x80
  43              	    
  44:task3.S       ****     jmp show_prompt	# Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  45              	
  46              	enter:
  47:task3.S       **** 	cmpl $0, %esi 	# Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ Ð¿ÑƒÑÑ‚Ð¾?
  48:task3.S       **** 	je show_prompt	# Ð”Ð - Ð½Ð° Ð²Ð²Ð¾Ð´ Ð½Ð¾Ð²Ð¾Ð³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  49              		 
  50:task3.S       **** 	decl %esi	# ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð½Ð° Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ð¹ Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° Ð´Ð»Ñ Ð¿Ñ€ÐµÐ´Ñ‹Ð´Ñƒ
  51:task3.S       **** 	subl %eax, %eax	# Ð¾Ñ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€
  52:task3.S       **** 	movb buf(%esi), %al	# Ð±Ð°Ð¹Ñ‚Ð¾Ð²Ð¾Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰ÐµÐ½Ð¸Ðµ, Ð¸Ð· Ð±ÑƒÑ„ÐµÑ€Ð° buf + esi Ð·Ð°Ð±Ð
  53:task3.S       **** 	subl $48, %eax		# Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ñ‹Ð²Ð°ÐµÐ¼ ÐºÐ¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð² ÑÐ°Ð¼Ð¾ Ñ‡Ð¸
  54              	
  55:task3.S       ****   	incl %esi		# ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÐ»ÐµÐ´ÑƒÑŽÑ
  56              	
  57:task3.S       **** 	jmp kbd_input		#  Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  58              	
  59              	print_err_msg:
GAS LISTING task3.S 			page 4


  60:task3.S       ****     Puts "ÐÐµ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ñ ÐºÐ»Ð°Ð²Ð¸ÑˆÐ°. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð²Ð²Ð¾Ð´."	# Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±
  60              	> .data
  60 ???? D09DD0B5 	>  str3:.ascii "ÐÐµ Ñ†Ð¸Ñ„Ñ€Ð¾Ð²Ð°Ñ ÐºÐ»Ð°Ð²Ð¸ÑˆÐ°. ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð²Ð²Ð¾Ð´.\n"
  60      20D186D0 
  60      B8D184D1 
  60      80D0BED0 
  60      B2D0B0D1 
  60              	>  
  60              	>  strlen3 =. - str3
  60              	> 
  60              	> .text
  60 ???? B8040000 	>  movl $4,%eax
  60      00
  60 ???? BB010000 	>  movl $1,%ebx
  60      00
  60 ???? B9000000 	>  movl $str3,%ecx
  60      00
  60 ???? BA430000 	>  movl $strlen3,%edx
  60      00
  60 ???? CD80     	>  int $0x80
  61:task3.S       **** 	jmp show_prompt 	# Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  62              		
  63              	print_err_buf:
  64:task3.S       ****     Puts "ÐšÐ¾Ð½ÐµÑ† Ð¼ÐµÑÑ‚Ð° Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ! Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹." #  Ð²Ñ‹Ð
  64              	> .data
  64 ???? D09AD0BE 	>  str4:.ascii "ÐšÐ¾Ð½ÐµÑ† Ð¼ÐµÑÑ‚Ð° Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ! Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹.\n"
  64      D0BDD0B5 
  64      D18620D0 
  64      BCD0B5D1 
  64      81D182D0 
  64              	>  
  64              	>  strlen4 =. - str4
  64              	> 
  64              	> .text
  64 ???? B8040000 	>  movl $4,%eax
  64      00
  64 ???? BB010000 	>  movl $1,%ebx
  64      00
  64 ???? B9000000 	>  movl $str4,%ecx
  64      00
  64 ???? BA500000 	>  movl $strlen4,%edx
  64      00
  64 ???? CD80     	>  int $0x80
  65:task3.S       ****     jmp stop					   # Ð½Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
  66              	
  67              	
  68              	stop:
  69:task3.S       ****     Exit $0
  69 ???? B8010000 	>  movl $1,%eax
  69      00
  69 ???? BB000000 	>  movl $0,%ebx
  69      00
  69 ???? CD80     	>  int $0x80
  70              	    
  71              	.end
GAS LISTING task3.S 			page 5


DEFINED SYMBOLS
             task3.S:8      .bss:0000000000000000 buf
             task3.S:8      .bss:000000000000000a c
             task3.S:14     .text:0000000000000000 _start
             task3.S:17     .text:0000000000000002 show_prompt
             task3.S:18     .data:0000000000000000 str0
             task3.S:18     *ABS*:000000000000002c strlen0
             task3.S:21     .text:0000000000000018 kbd_input
             task3.S:68     .text:00000000000000d3 stop
             task3.S:46     .text:0000000000000082 enter
             task3.S:59     .text:00000000000000a0 print_err_msg
             task3.S:63     .text:00000000000000bb print_err_buf
             task3.S:42     .data:000000000000002c str2
             task3.S:42     *ABS*:000000000000001a strlen2
             task3.S:60     .data:0000000000000046 str3
             task3.S:60     *ABS*:0000000000000043 strlen3
             task3.S:64     .data:0000000000000089 str4
             task3.S:64     *ABS*:0000000000000050 strlen4

NO UNDEFINED SYMBOLS
