GAS LISTING task5.S 			page 1


   1              	/**
   2              	 * –ü—Ä–æ–≥—Ä–∞–º–º–∞, –ø–æ–ª—É—á–∞—é—â–∞—è –≤–µ–∫—Ç–æ—Ä, —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã—á–
   3              	 *
   4              	 * Copyright (c) 2020, Dasha Efimova <dashulya0301178@gmail.com>
   5              	*/
   6              	
   7              	.include "my-macro"	# –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏
   1              	/* 
   2              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.
   3              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
   4              	 * 	- –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
   5              	 *
   6              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
   7              	 * –°–º. —Ç–∞–∫–∂–µ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              		movl $1, %eax 		    # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ exit –Ω–æ–º–µ—Ä 1
  11              		movl \ret_val, %ebx 	# –∫–æ–¥ –≤—ã—Ö–æ–¥–∞
  12              		int $0x80 		        # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  13              	.endm  
  14              	
  15              	/*
  16              	 * –ú–∞—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Å–∏–
  17              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  18              	 * 	- –∞–¥—Ä–µ—Å –±—É—Ñ—Ñ–µ—Ä–∞ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–∞
  19              	 * –†–µ–∑—É–ª—å—Ç–∞—Ç:
  20              	 *	- –≤ %eax –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
  21              	 *	- –ø–æ –∞–¥—Ä–µ—Å—É buf_addr - —Å—á–∏—Ç–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª
  22              	 * 
  23              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
  24              	 * –°–º. —Ç–∞–∫–∂–µ 'man 2 read'
  25              	*/
  26              	.macro Getchar buf_addr
  27              		movl $3, %eax		# –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ read
  28              		movl $0, %ebx		# –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞
  29              		movl \buf_addr, %ecx	# –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ (–æ–Ω –∂–µ - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫
  30              		     			        # –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞)
  31              		movl $1, %edx		# –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏—è
  32              		int $0x80		# –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  33              	.endm
  34              	
  35              	/*
  36              	 * –ú–∞—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –≤ —Å—Ç–∞–Ω–¥
  37              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  38              	 * 	- –°—Ç—Ä–æ–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞.
  39              	 *
  40              	 * –ü—Ä–∏–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞:
  41              	 *	Puts "–¢–µ–∫—Å—Ç –≤—ã–≤–æ–¥–∏–º–æ–π —Å—Ç—Ä–æ–∫–∏" 
  42              	 *
  43              	 * –†–µ–∑—É–ª—å—Ç–∞—Ç:
  44              	 *	- –≤—ã–≤–æ–¥–∏—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ —Å–∏–º–≤–æ–ª—ã –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫
  45              	 *	  –∞ —Ç–∞–∫–∂–µ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏
  46              	 *	
  47              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
  48              	 * –°–º. —Ç–∞–∫–∂–µ 'man puts', 'man 2 write'
  49              	*/
  50              	.macro Puts string      #–í—ã–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ —Å—Ç—Ä–æ–∫–
GAS LISTING task5.S 			page 2


  51              	.data
  52              	str\@: .ascii "\string" # —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –≤—ã–
  53              	
  54              	strlen\@ = . - str\@    # –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏
  55              	
  56              	.text
  57              	    movl $4, %eax       # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ write
  58              	    movl $1, %ebx       # –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤–
  59              	    movl $str\@, %ecx   # –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –ø–∞–º—è—Ç–∏ —Å –≤—ã–≤–æ–¥–∏–º—ã–º–∏ —Å–∏–
  60              	    movl $strlen\@, %edx # –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è –≤—ã–≤–æ–¥–
  61              	    int $0x80           # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  62              	.endm
  63              	
  64              	.macro Division        # –î–µ–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞
  65              	.text
  66              	    check_minus_p\@:   # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –º–∏–Ω—É—Å
  67              	    movl $0, %esi
  68              	    cmpl $0, result    # –≤ —Å—É–º–º–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ 0?
  69              	    jl place_minus\@   # –î–ê - –Ω–∞ –≤—ã–≤–æ–¥ –º–∏–Ω—É—Å–∞
  70              	    jmp place_numbers\@  # –Ω–∞ –ø–µ—Ä–µ–≤–æ–¥ —Å—É–º–º—ã –≤ —Å–∏—Å—Ç–µ–º—É —Å—á–∏—Å–ª–µ–Ω–∏—è ebx
  71              	
  72              	place_minus\@: # –ï—Å–ª–∏ –º–∏–Ω—É—Å - –≤—ã–≤–µ–¥–µ–º –µ–≥–æ –∏ –≤–æ–∑—å–º–µ–º —á–∏—Å–ª–æ –ø–æ –º–æ
  73              	    movl %ebx, %ebp    # —É–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å bp –Ω–∞ –±–∞–
  74              	    Puts "-"           # –≤—ã–≤–æ–¥–∏–º —Å–Ω–∞—á–∞–ª–∞ –∑–Ω–∞–∫ -
  75              	    movl $0, %eax      # –ø–æ–º–µ—â–∞–µ–º 0 –ø–æ—Å–ª–µ –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ Puts
  76              	    movl result, %eax  # –ø–æ–º–µ—â–∞–µ–º —Å—É–º–º—É –≤ —Ä–µ–≥–∏—Å—Ç—Ä %eax
  77              	    movl %ebp, %ebx    # –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–º–µ—â–∞–µ–º –æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤ %ebx
  78              	    negl %eax          # –∏–∑–º–µ–Ω—è–µ–º –∑–Ω–∞–∫ –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–π —É —Å—É–º–º—
  79              	    jmp place_numbers\@   # –Ω–∞ –ø–µ—Ä–µ–≤–æ–¥ —Å—É–º–º—ã –≤ —Å–∏—Å—Ç–µ–º—É —Å—á–∏—Å–ª–µ–Ω–∏—è ebx
  80              		
  81              	place_numbers\@:       # –î–µ–ª–∏–º
  82              	    movl $0, %edx      # –≥–æ—Ç–æ–≤–∏–º –¥–µ–ª–µ–Ω–∏–µ
  83              	    idiv %ebx          # –¥–µ–ª–∏–º –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ, –æ—Å—Ç–∞—Ç–æ–∫ –≤ %edx
  84              	    add $'0', %edx     # —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–∞ –∫–æ–¥ 0, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–∏–º–≤
  85              	    mov %edx, buf(%esi) # –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å–∏–º–≤–æ–ª –≤ –±—É—Ñ–µ—Ä
  86              	    inc %esi           # —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–∞ 1, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Å–
  87              	    cmp $0, %eax       # —á–∞—Å—Ç–Ω–æ–µ = 0?
  88              	    je out\@ # –î–ê - –∏–¥–µ–º –Ω–∞ —Ä–∞–∑–≤–æ—Ä–æ—Ç –±—É—Ñ–µ—Ä–∞
  89              	    jmp place_numbers\@ # –ù–ï–¢ - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–µ–ª–∏—Ç—å
  90              	    out\@:
  91              	    int $0x80
  92              	.endm
  93              	
  94              	.macro Putn           # –í—ã–≤–æ–¥ —á–∏—Å–ª–∞: eax - —á–∏—Å–ª–æ, ebx - –æ—Å–Ω–æ–≤–∞–Ω–∏–µ 
  95              	.text
  96              	preinverted\@:        # –ü–æ–¥–≥–æ—Ç–æ–≤–∏–º—Å—è –∫ —Ä–∞–∑–≤–æ—Ä–æ—Ç—É –±—É—Ñ–µ—Ä–∞ —Å —Ü–∏—Ñ—Ä–∞–º
  97              	    movl %esi, %ecx   # –ø–æ–º–µ—â–∞–µ–º –≤ ecx –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏—Ñ—Ä —Å—É–º–º—ã
  98              	    dec %ecx          # —É–∫–∞–∑–∞—Ç—å –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞
  99              	    movl %esi, %eax   # –ø–æ–º–µ—â–∞–µ–º –≤ e–∞x –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ —Å—É–º–º—ã
 100              	    movl $0, %edx
 101              	    movl $2, %ebx     # –±—É–¥–µ–º —É–∑–Ω–∞–≤–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞–º –Ω—É–∂–
 102              	    idivl %ebx        # –¥–µ–ª–∏–º, –æ—Å—Ç–∞—Ç–æ–∫ —É—Ö–æ–¥–∏—Ç –≤ %edx
 103              	    movl $0, %esi
 104              	    jmp inverted\@    # –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å–∞–º —Ä–∞–∑–≤–æ—Ä–æ—Ç –±—É—Ñ–µ—Ä–∞
 105              	
 106              	inverted\@:
 107              	    cmp %eax, %esi    # –≤—Å–µ –ª–∏ —Å–∏–º–≤–æ–ª—ã –ø–æ–º–µ–Ω—è–ª–∏ –º–µ—Å—Ç–∞–º–∏
GAS LISTING task5.S 			page 3


 108              	    je put_out\@      # –î–ê - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤—ã–≤–æ–¥ —á–∏—Å–ª–∞ –Ω–∞ —ç–∫—Ä–∞–Ω
 109              	    movb buf(%esi), %bl # –ø–æ–º–µ—â–∞–µ–º –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞ –∫ %bl –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é %esi
 110              	    movl %ecx, %edx   # –ø–æ–º–µ—â–∞–µ–º –≤ %edx –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π –±—É—Ñ–µ—Ä–∞
 111              	    sub %esi, %edx    # —É–∑–Ω–∞–µ–º, –∫–∞–∫–∏–µ –º–µ—Å—Ç–∞ –±—É–¥–µ–º –º–µ–Ω—è—Ç—å
 112              		# –¥–∞–ª–µ–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ–º –æ–±–º–µ–Ω —Å–∏–º–≤–æ–ª–æ–≤ –º–µ—Å—Ç–∞–º–∏ 
 113              	    movb buf(%edx), %bh 
 114              	    movb %bl, buf(%edx)
 115              	    movb %bh, buf(%esi)
 116              	    inc %esi          # —É–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ –¥–ª—è —Å–ª–
 117              	    jmp inverted\@    # –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –¥–ª—è –¥–∞–ª—å–Ω–µ—à–µ–≥–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
 118              	
 119              	put_out\@:            # –í—ã–≤–æ–¥ —á–∏—Å–ª–∞ –Ω–∞ —ç–∫—Ä–∞–Ω
 120              		inc %ecx          # —É–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ 
 121              		movl $4, %eax     # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ write
 122              		movl $1, %ebx     # –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
 123              		movl %ecx, %edx   # –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –ø–∞–º—è—Ç–∏ —Å –≤—ã–≤–æ–¥–∏–º—ã–º–∏ —Å–∏–º–≤–æ
 124              	    movl $buf, %ecx   # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è –≤—ã–≤–æ–¥–∞
 125              	    int $0x80 # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
 126              	.endm
 127              	
   8              		
   9              	.bss
  10              		.lcomm buf, 100 # –±—É—Ñ–µ—Ä –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤. –†–∞
  11              		.lcomm k, 1 	# –±—É—Ñ–µ—Ä –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞. –†–∞–∑–º–µ—Ä - 1 –±
  12              		.lcomm l, 1 	# –±—É—Ñ–µ—Ä –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞. –†–∞–∑–º–µ—Ä - 1 –±
  13              		
  14              		
  15              	.data # —Å–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
  16              	
  17 0000 00000000 	result:	.long 0		     	# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–µ–ª–µ–Ω–∏—è —á–∏—Å–ª–∞, –¥–ª—è –ø–æ—Å–ª
  18 0004 00000000 	clean:	.long 0		    	# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–∏ –±—É—Ñ–µ—Ä–∞
  19 0008 00000000 	b:	.long 0,0,0,0,0,0	# –ò—Å–∫–æ–º—ã–π –≤–µ–∫—Ç–æ—Ä
  19      00000000 
  19      00000000 
  19      00000000 
  19      00000000 
  20 0020 00000000 	column:	.long 0		        # –ù–æ–º–µ—Ä —Å—Ç–æ–ª–±—Ü–∞
  21 0024 00000000 	string:	.long 0			# –ù–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏
  22 0028 00000000 	num:	.long 0			# –ü–æ–º–æ–≥–∞–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å —á–∏—Å–ª–æ –≤ –≤–µ–∫—Ç–æ—Ä
  23              	A:			        # –ú–∞—Ç—Ä–∏—Ü–∞ 6—Ö6
  24              	
  25 002c 0B000000 		.long 11,-12,13,-14,15,16
  25      F4FFFFFF 
  25      0D000000 
  25      F2FFFFFF 
  25      0F000000 
  26 0044 15000000 		.long 21,22,-23,24,25,26
  26      16000000 
  26      E9FFFFFF 
  26      18000000 
  26      19000000 
  27 005c 1F000000 		.long 31,32,33,34,-35,36
  27      20000000 
  27      21000000 
  27      22000000 
  27      DDFFFFFF 
  28 0074 D7FFFFFF 		.long -41,42,43,44,45,46
GAS LISTING task5.S 			page 4


  28      2A000000 
  28      2B000000 
  28      2C000000 
  28      2D000000 
  29 008c 33000000 		.long 51,52,53,54,-55,56
  29      34000000 
  29      35000000 
  29      36000000 
  29      C9FFFFFF 
  30 00a4 3D000000 		.long 61,62,63,64,65,2147483640
  30      3E000000 
  30      3F000000 
  30      40000000 
  30      41000000 
  31              	
  32              	.text # —Å–µ–∫—Ü–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞
  33              	
  34              	.global _start # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –º–µ—Ç–∫–∞
  35              	
  36              	_start:
  37 0000 29F6     		sub %esi, %esi     			# —É–∫–∞–∑–∞—Ç–µ–ª—å –∞–¥—Ä–µ—Å–∞ –±–∞–π—Ç–∞ –≤ –±—É—Ñ–µ—Ä–µ —Å–∏–º–≤–æ–ª–æ–
  38              		Puts "Enter column (l) number: "
  38              	> .data
  38 00bc 456E7465 	> str0:.ascii "Enter column (l) number: "
  38      7220636F 
  38      6C756D6E 
  38      20286C29 
  38      206E756D 
  38              	> 
  38              	> strlen0 =. - str0
  38              	> 
  38              	> .text
  38 0002 B8040000 	>  movl $4,%eax
  38      00
  38 0007 BB010000 	>  movl $1,%ebx
  38      00
  38 000c B9BC0000 	>  movl $str0,%ecx
  38      00
  38 0011 BA190000 	>  movl $strlen0,%edx
  38      00
  38 0016 CD80     	>  int $0x80
  39              	
  40              	kbd_input_l:
  41              	    Getchar $l          		# –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤ –≤–≤–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–
  41 0018 B8030000 	>  movl $3,%eax
  41      00
  41 001d BB000000 	>  movl $0,%ebx
  41      00
  41 0022 B9650000 	>  movl $l,%ecx
  41      00
  41              	>  
  41 0027 BA010000 	>  movl $1,%edx
  41      00
  41 002c CD80     	>  int $0x80
  42 002e 83F800   	    cmpl $0, %eax   			# –ö–æ–Ω–µ—Ü —Ñ–∞–π–ª - EOF (–≤–≤–µ–¥–µ–Ω–æ 0 —Å–∏–º–≤–æ–ª–æ–≤) ?
  43 0031 0F84D102 	    je stop         			# –î–ê - –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
  43      0000
GAS LISTING task5.S 			page 5


  44 0037 803D6500 	    cmpb $'\n', l   			# —ç—Ç–æ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ ?
  44      00000A
  45 003e 7420     	    je sum1		                # –î–ê - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ
  46 0040 803D6500 	    cmpb $'6',l				# –ö–æ–¥ —Å–∏–º–≤–æ–ª–∞ –±–æ–ª—å—à–µ –∫–æ–¥–∞ 6? 
  46      000036
  47 0047 77CF     	    ja kbd_input_l	                # –î–ê - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –µ–≥–æ
  48 0049 803D6500 	    cmpb $'1',l		        	# –ö–æ–¥ —Å–∏–º–≤–æ–ª–∞ –º–µ–Ω—å—à–µ –∫–æ–¥–∞ 1?
  48      000031
  49 0050 72C6     	    jb kbd_input_l			# –î–ê - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –µ–≥–æ
  50 0052 A0650000 	    movb l, %al     	        	# –∫–æ–¥ –∏–∑ l –ø–∏—à–µ–º –≤ al
  50      00
  51 0057 88860000 	    movb %al,buf(%esi)  	        # –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ al (–≤–≤–µ–¥–µ–Ω–Ω—ã–π —
  51      0000
  52 005d 46       	    incl %esi			        # —É–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞
  53 005e EBB8     	    jmp kbd_input_l   	         	# –Ω–∞ –≤–≤–æ–¥ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞
  54              	          
  55              	
  56              	sum1:
  57 0060 83FE00   	    cmpl $0, %esi			# —Ä–µ–≥–∏—Å—Ç—Ä —Ä–∞–≤–µ–Ω –Ω—É–ª—é?
  58 0063 0F844702 	    je error1	                        # –î–ê - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—
  58      0000
  59 0069 4E       	    decl %esi		                # —É–∫–∞–∑–∞—Ç—å –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞
  60 006a 29C0     	    sub %eax, %eax			# –æ—á–∏—â–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä 
  61 006c BB300000 	    movl $'0', %ebx   	        	# –≤ ebx –∑–∞–Ω–æ—Å–∏–º –∫–æ–¥ 0
  61      00
  62 0071 8A860000 	    movb buf(%esi), %al 	        # –±–∞–π—Ç–æ–≤–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, –∏–∑ –±—É—Ñ–µ—Ä–∞ buf +
  62      0000
  63 0077 C7860000 	    movl $0, buf(%esi)  	        # –≤ –±—É—Ñ–µ—Ä –ø–æ–º–µ—â–∞–µ–º 0
  63      00000000 
  63      0000
  64 0081 29D8     	    sub %ebx, %eax     			# –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ–º –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞ —Ü–∏—Ñ—Ä—ã –≤ —Å–∞
  65 0083 A3200000 	    movl %eax, column 	                # –ø–µ—Ä–µ–º–µ—â–∞–µ–º —á–∏—Å–ª–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤
  65      00
  66 0088 29F6     	    sub %esi, %esi		        # –æ—á–∏—Å—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
  67              	    Puts "Enter line(k) number: "
  67              	> .data
  67 00d5 456E7465 	> str2:.ascii "Enter line(k) number: "
  67      72206C69 
  67      6E65286B 
  67      29206E75 
  67      6D626572 
  67              	> 
  67              	> strlen2 =. - str2
  67              	> 
  67              	> .text
  67 008a B8040000 	>  movl $4,%eax
  67      00
  67 008f BB010000 	>  movl $1,%ebx
  67      00
  67 0094 B9D50000 	>  movl $str2,%ecx
  67      00
  67 0099 BA160000 	>  movl $strlen2,%edx
  67      00
  67 009e CD80     	>  int $0x80
  68              	
  69              	kbd_input_k:
  70              	    Getchar $k          	        # –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤ –≤–≤–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ —Å–æ —Å—Ç–∞–Ω–¥–∞
GAS LISTING task5.S 			page 6


  70 00a0 B8030000 	>  movl $3,%eax
  70      00
  70 00a5 BB000000 	>  movl $0,%ebx
  70      00
  70 00aa B9640000 	>  movl $k,%ecx
  70      00
  70              	>  
  70 00af BA010000 	>  movl $1,%edx
  70      00
  70 00b4 CD80     	>  int $0x80
  71 00b6 83F800   	    cmpl $0, %eax   			# –ö–æ–Ω–µ—Ü —Ñ–∞–π–ª - EOF (–≤–≤–µ–¥–µ–Ω–æ 0 —Å–∏–º–≤–æ–ª–æ–≤) ?
  72 00b9 0F844902 	    je stop         			# –î–ê - –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
  72      0000
  73 00bf 803D6400 	    cmpb $'\n', k   			# —ç—Ç–æ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ ?
  73      00000A
  74 00c6 7420     	    je sum2				# –î–ê - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á–∏—Å–ª–
  75 00c8 803D6400 	    cmpb $'6',k				# –ö–æ–¥ —Å–∏–º–≤–æ–ª–∞ –±–æ–ª—å—à–µ –∫–æ–¥–∞ 6?
  75      000036
  76 00cf 77CF     	    ja kbd_input_k			# –î–ê - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –µ–≥–æ
  77 00d1 803D6400 	    cmpb $'1',k				# –ö–æ–¥ —Å–∏–º–≤–æ–ª–∞ –º–µ–Ω—å—à–µ –∫–æ–¥–∞ 1?
  77      000031
  78 00d8 72C6     	    jb kbd_input_k		        # –î–ê - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –µ–≥–æ
  79 00da A0640000 	    movb k, %al     			# –∫–æ–¥ –∏–∑ —Å –ø–∏—à–µ–º –≤ al
  79      00
  80 00df 88860000 	    movb %al,buf(%esi)  	        # –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ al (–≤–≤–µ–¥–µ–Ω–Ω—ã–π —
  80      0000
  81 00e5 46       	    incl %esi				# —É–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞
  82 00e6 EBB8     	    jmp kbd_input_k   		        # –Ω–∞ –≤–≤–æ–¥ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞
  83              	          
  84              	
  85              	sum2:
  86 00e8 83FE00   	    cmpl $0, %esi			# —Ä–µ–≥–∏—Å—Ç—Ä —Ä–∞–≤–µ–Ω –Ω—É–ª—é?
  87 00eb 0F84DF01 	    je error2				# –î–ê - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∏
  87      0000
  88 00f1 4E       	    decl %esi		                # —É–∫–∞–∑–∞—Ç—å –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞
  89 00f2 29C0     	    sub %eax, %eax			# –æ—á–∏—â–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä
  90 00f4 BB300000 	    movl $'0', %ebx   			# –≤ ebx –∑–∞–Ω–æ—Å–∏–º –∫–æ–¥ 0
  90      00
  91 00f9 8A860000 	    movb buf(%esi), %al                 # –±–∞–π—Ç–æ–≤–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, –∏–∑ –±—É—Ñ–µ—Ä–
  91      0000
  92 00ff C7860000 	    movl $0, buf(%esi)  		# –≤ –±—É—Ñ–µ—Ä –ø–æ–º–µ—â–∞–µ–º 0
  92      00000000 
  92      0000
  93 0109 29D8     	    sub %ebx, %eax     			# –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ–º –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞ —Ü–∏—Ñ—Ä—ã –≤ —Å–∞
  94 010b A3240000 	    movl %eax, string		        # –ø–µ—Ä–µ–º–µ—â–∞–µ–º —á–∏—Å–ª–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –ø–∞–º—
  94      00
  95 0110 29F6     	    sub %esi, %esi			# –æ—á–∏—Å—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
  96 0112 BA2C0000 	    mov $A, %edx     	                # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ü
  96      00
  97              	
  98              	Next_String1:
  99              	
 100 0117 29DB     	   subl %ebx, %ebx	  		# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ü–∏–∫–ª–∞ –ø–æ —
 101              		
 102              	Next_Row1:		
 103              	
 104 0119 8B049A   		movl (%edx,%ebx,4), %eax        # –∞–¥—Ä–µ—Å –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ê[11] 
GAS LISTING task5.S 			page 7


 105 011c 43       		incl %ebx		  	# j++ 
 106 011d 3B1D2000 		cmpl column, %ebx		# —Å—Ç–æ–ª–±—Ü—ã —Ä–∞–≤–Ω—ã –∑–∞–¥–∞–Ω–Ω–æ–º—É —á–∏—Å–ª—É?
 106      0000
 107 0123 75F4     		jne  Next_Row1          	# –ù–ï–¢ - –∏–¥–µ–º –¥–∞–ª—å—à–µ
 108 0125 29C9     		subl %ecx, %ecx			# –±–∞–∑–∞ = 0 - –Ω–∞ 1-—ã–π —ç–ª–µ–º–µ–Ω—Ç 
 109 0127 8B0D2800 		movl num, %ecx				
 109      0000
 110 012d 01810800 		addl %eax, b(%ecx)		# 1-—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –±—É–¥—É—â–µ–º –≤–µ–∫—Ç–æ—Ä–µ
 110      0000
 111 0133 83052800 		addl $4, num			# –î–æ–±–∞–≤–ª—è–µ–º 4 –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–ª–µ–¥—É—â–∏–π —ç–ª–µ–º–µ–Ω—Ç
 111      000004
 112 013a 83C218   		addl $24, %edx	  		# –î–æ–±–∞–≤–ª—è–µ–º 24 (4*6=24) –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–ª–µ–¥—É—â—É—é 
 113 013d 81FABC00 		cmpl $A+144, %edx 		# —Å—Ç—Ä–æ–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å? (24*6=144)
 113      0000
 114 0143 75D2     		jne  Next_String1       	# –ù–ï–¢ - –∏–¥–µ–º –¥–∞–ª—å—à–µ
 115 0145 C7052800 		movl $0, num			# –æ–±–Ω—É–ª—è–µ–º num
 115      00000000 
 115      0000
 116              		
 117 014f BA2C0000 		mov $A, %edx			# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ü–∏–∫–ª–∞ –ø–æ —Å—Ç—Ä–æ
 117      00
 118 0154 29DB     		subl %ebx, %ebx			# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ü–∏–∫–ª–∞ –ø–æ —Å—Ç–
 119              	
 120              	Next_String2:		
 121              	
 122 0156 8B049A   		movl (%edx, %ebx,4), %eax       	# –∞–¥—Ä–µ—Å –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ê[11]
 123 0159 46       		incl %esi		  	    	# —É–∫–∞–∑–∞—Ç—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞
 124 015a 83C218   		addl $24, %edx		  		# –¥–æ–±–∞–≤–ª—è–µ–º –∫ –∞–¥—Ä–µ—Å—É 24 –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–ª–µ–¥—
 125 015d 3B352400 		cmpl string, %esi		  	# —Å—Ç—Ä–æ–∫–∞ —Ä–∞–≤–Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–º—É —á–∏—Å–ª—É?
 125      0000
 126 0163 75F1     		jne  Next_String2	  		# –ù–ï–¢ - –∏–¥–µ–º –¥–∞–ª—å—à–µ
 127 0165 83EA18   		subl $24, %edx		  		# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–æ–∫–µ
 128 0168 EB00     		jmp  Next_Row2		  		
 129              	
 130              	Next_Row2:
 131              	
 132 016a 29C9     		subl %ecx, %ecx				# –±–∞–∑–∞ = 0 - –Ω–∞ 1-—ã–π —ç–ª–µ–º–µ–Ω—Ç
 133 016c 8B0D2800 		movl num, %ecx				
 133      0000
 134 0172 01810800 		addl %eax, b(%ecx)			# 1-—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –±—É–¥—É—â–µ–º –≤–µ–∫—Ç–æ—Ä–µ
 134      0000
 135 0178 0F807201 	        jo error3
 135      0000
 136 017e 83052800 		addl $4, num				# –î–æ–±–∞–≤–ª—è–µ–º 4 –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–
 136      000004
 137 0185 43       		incl %ebx			        # j++
 138 0186 8B049A   		movl (%edx, %ebx,4), %eax 	        # –∞–¥—Ä–µ—Å –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Å—Ç—Ä–æ–∫–µ
 139 0189 83FB06   		cmpl $6, %ebx		  		# —Å—Ç–æ–ª–±—Ü—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å?
 140 018c 75DC     		jne  Next_Row2		  		# –ù–ï–¢ - –∏–¥–µ–º –¥–∞–ª—å—à–µ
 141 018e C7052800 		movl $0, num		  		# –æ–±–Ω—É–ª—è–µ–º num
 141      00000000 
 141      0000
 142 0198 29F6     		subl %esi, %esi		  		# –æ—á–∏—â–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä
 143              	
 144              		Puts "B(i)= "
 144              	> .data
 144 00eb 42286929 	> str4:.ascii "B(i)= "
GAS LISTING task5.S 			page 8


 144      3D20
 144              	> 
 144              	> strlen4 =. - str4
 144              	> 
 144              	> .text
 144 019a B8040000 	>  movl $4,%eax
 144      00
 144 019f BB010000 	>  movl $1,%ebx
 144      00
 144 01a4 B9EB0000 	>  movl $str4,%ecx
 144      00
 144 01a9 BA060000 	>  movl $strlen4,%edx
 144      00
 144 01ae CD80     	>  int $0x80
 145              		
 146              	put_out:	
 147              	
 148 01b0 8B352800 		movl num, %esi		                # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä—É %esi –∑–Ω–∞—á–µ–Ω–∏–µ nu
 148      0000
 149 01b6 83FE06   		cmpl $6, %esi	                	# –í—ã–≤–µ–ª–∏ –≤—Å–µ —á–∏—Å–ª–∞?
 150 01b9 0F844901 		je stop			                # –î–ê - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –∫–æ–Ω–µ—Ü –ø—Ä–æ–≥—Ä–∞–º–º—ã
 150      0000
 151 01bf 8B04B508 		movl b(,%esi,4), %eax	                # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∞ –≤ —Ä
 151      000000
 152 01c6 A3000000 		movl %eax, result	                # –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é 
 152      00
 153 01cb BB0A0000 		movl $10, %ebx	           	        # –û—Å–Ω–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å—á–∏—Å–ª–µ–Ω–∏—è (–¥–ª—è 
 153      00
 154 01d0 BE000000 		movl $0, %esi		                # –û—á–∏—â–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä (–¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è 
 154      00
 155              		Division		                # –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤ - –¥–µ–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞
 155              	> .text
 155              	>  check_minus_p5:
 155 01d5 BE000000 	>  movl $0,%esi
 155      00
 155 01da 833D0000 	>  cmpl $0,result
 155      000000
 155 01e1 7C02     	>  jl place_minus5
 155 01e3 EB28     	>  jmp place_numbers5
 155              	> 
 155              	> place_minus5:
 155 01e5 89DD     	>  movl %ebx,%ebp
 155              	>  Puts "-"
 155              	>> .data
 155 00f1 2D       	>> str6:.ascii "-"
 155              	>> 
 155              	>> strlen6 =. - str6
 155              	>> 
 155              	>> .text
 155 01e7 B8040000 	>>  movl $4,%eax
 155      00
 155 01ec BB010000 	>>  movl $1,%ebx
 155      00
 155 01f1 B9F10000 	>>  movl $str6,%ecx
 155      00
 155 01f6 BA010000 	>>  movl $strlen6,%edx
 155      00
GAS LISTING task5.S 			page 9


 155 01fb CD80     	>>  int $0x80
 155 01fd B8000000 	>  movl $0,%eax
 155      00
 155 0202 A1000000 	>  movl result,%eax
 155      00
 155 0207 89EB     	>  movl %ebp,%ebx
 155 0209 F7D8     	>  negl %eax
 155 020b EB00     	>  jmp place_numbers5
 155              	>  
 155              	> place_numbers5:
 155 020d BA000000 	>  movl $0,%edx
 155      00
 155 0212 F7FB     	>  idiv %ebx
 155 0214 83C230   	>  add $48,%edx
 155 0217 89960000 	>  mov %edx,buf(%esi)
 155      0000
 155 021d 46       	>  inc %esi
 155 021e 83F800   	>  cmp $0,%eax
 155 0221 7402     	>  je out5
 155 0223 EBE8     	>  jmp place_numbers5
 155              	>  out5:
 155 0225 CD80     	>  int $0x80
 156 0227 89350400 		movl %esi, clean		        # –ó–∞–ø–∏—Å–∞—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é clean –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü
 156      0000
 157              		Putn                                    # –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤ –≤—ã–≤–æ–¥–∞ —á–∏—Å–ª–∞
 157              	> .text
 157              	> preinverted7:
 157 022d 89F1     	>  movl %esi,%ecx
 157 022f 49       	>  dec %ecx
 157 0230 89F0     	>  movl %esi,%eax
 157 0232 BA000000 	>  movl $0,%edx
 157      00
 157 0237 BB020000 	>  movl $2,%ebx
 157      00
 157 023c F7FB     	>  idivl %ebx
 157 023e BE000000 	>  movl $0,%esi
 157      00
 157 0243 EB00     	>  jmp inverted7
 157              	> 
 157              	> inverted7:
 157 0245 39C6     	>  cmp %eax,%esi
 157 0247 741F     	>  je put_out7
 157 0249 8A9E0000 	>  movb buf(%esi),%bl
 157      0000
 157 024f 89CA     	>  movl %ecx,%edx
 157 0251 29F2     	>  sub %esi,%edx
 157              	>  
 157 0253 8ABA0000 	>  movb buf(%edx),%bh
 157      0000
 157 0259 889A0000 	>  movb %bl,buf(%edx)
 157      0000
 157 025f 88BE0000 	>  movb %bh,buf(%esi)
 157      0000
 157 0265 46       	>  inc %esi
 157 0266 EBDD     	>  jmp inverted7
 157              	> 
 157              	> put_out7:
GAS LISTING task5.S 			page 10


 157 0268 41       	>  inc %ecx
 157 0269 B8040000 	>  movl $4,%eax
 157      00
 157 026e BB010000 	>  movl $1,%ebx
 157      00
 157 0273 89CA     	>  movl %ecx,%edx
 157 0275 B9000000 	>  movl $buf,%ecx
 157      00
 157 027a CD80     	>  int $0x80
 158              		Puts " "		                # –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤ –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω
 158              	> .data
 158 00f2 20       	> str8:.ascii " "
 158              	> 
 158              	> strlen8 =. - str8
 158              	> 
 158              	> .text
 158 027c B8040000 	>  movl $4,%eax
 158      00
 158 0281 BB010000 	>  movl $1,%ebx
 158      00
 158 0286 B9F20000 	>  movl $str8,%ecx
 158      00
 158 028b BA010000 	>  movl $strlen8,%edx
 158      00
 158 0290 CD80     	>  int $0x80
 159 0292 8B350400 		movl clean, %esi		        # –ó–∞–Ω–æ—Å–∏–º –≤ —Ä–µ–≥–∏—Å—Ç—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏—Ñ—Ä –≤ —á–∏
 159      0000
 160              		
 161              	cleaning_buf:
 162              		
 163 0298 C6860000 		movb $0, buf(%esi)   	                # –æ—á–∏—â–∞–µ–º –±—É—Ñ–µ—Ä
 163      000000
 164 029f 4E       		decl %esi		                # —É–º–µ–Ω—å—à–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä –Ω–∞ 1
 165 02a0 83FE00   		cmpl $0, %esi		                # –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ —Ä–∞–≤–Ω–æ 0?
 166 02a3 75F3     		jne cleaning_buf	                # –ù–ï–¢ - –∏–¥–µ–º –¥–∞–ª—å—à–µ
 167 02a5 FF052800 		incl num		                # —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º num
 167      0000
 168 02ab E900FFFF 		jmp put_out		                # –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤–≤–æ–¥ —Å–ª–µ–¥—É—â–µ–≥–æ —á–∏—Å–ª–∞ –≤–µ
 168      FF
 169              	
 170              	error1:
 171              		Puts "Enter a number from 1 to 6\n"
 171              	> .data
 171 00f3 456E7465 	> str9:.ascii "Enter a number from 1 to 6\n"
 171      72206120 
 171      6E756D62 
 171      65722066 
 171      726F6D20 
 171              	> 
 171              	> strlen9 =. - str9
 171              	> 
 171              	> .text
 171 02b0 B8040000 	>  movl $4,%eax
 171      00
 171 02b5 BB010000 	>  movl $1,%ebx
 171      00
 171 02ba B9F30000 	>  movl $str9,%ecx
GAS LISTING task5.S 			page 11


 171      00
 171 02bf BA1B0000 	>  movl $strlen9,%edx
 171      00
 171 02c4 CD80     	>  int $0x80
 172 02c6 BE000000 		movl $0, %esi	                        # –æ—á–∏—â–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä
 172      00
 173 02cb E948FDFF 		jmp kbd_input_l		                # –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤–≤–æ–¥ —á–∏—Å–ª–∞
 173      FF
 174              		
 175              	error2:
 176              		Puts "Enter a number from 1 to 6\n"
 176              	> .data
 176 010e 456E7465 	> str10:.ascii "Enter a number from 1 to 6\n"
 176      72206120 
 176      6E756D62 
 176      65722066 
 176      726F6D20 
 176              	> 
 176              	> strlen10 =. - str10
 176              	> 
 176              	> .text
 176 02d0 B8040000 	>  movl $4,%eax
 176      00
 176 02d5 BB010000 	>  movl $1,%ebx
 176      00
 176 02da B90E0100 	>  movl $str10,%ecx
 176      00
 176 02df BA1B0000 	>  movl $strlen10,%edx
 176      00
 176 02e4 CD80     	>  int $0x80
 177 02e6 BE000000 		movl $0, %esi		                # –æ—á–∏—â–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä
 177      00
 178 02eb E9B0FDFF 		jmp kbd_input_k		                # –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤–≤–æ–¥ —á–∏—Å–ª–∞
 178      FF
 179              	error3:
 180              	        Puts "Amount overflowed!\n"
 180              	> .data
 180 0129 416D6F75 	> str11:.ascii "Amount overflowed!\n"
 180      6E74206F 
 180      76657266 
 180      6C6F7765 
 180      64210A
 180              	> 
 180              	> strlen11 =. - str11
 180              	> 
 180              	> .text
 180 02f0 B8040000 	>  movl $4,%eax
 180      00
 180 02f5 BB010000 	>  movl $1,%ebx
 180      00
 180 02fa B9290100 	>  movl $str11,%ecx
 180      00
 180 02ff BA130000 	>  movl $strlen11,%edx
 180      00
 180 0304 CD80     	>  int $0x80
 181 0306 EB00     	        jmp stop
 182              		
GAS LISTING task5.S 			page 12


 183              	stop:
 184              		Puts "\n"
 184              	> .data
 184 013c 0A       	> str12:.ascii "\n"
 184              	> 
 184              	> strlen12 =. - str12
 184              	> 
 184              	> .text
 184 0308 B8040000 	>  movl $4,%eax
 184      00
 184 030d BB010000 	>  movl $1,%ebx
 184      00
 184 0312 B93C0100 	>  movl $str12,%ecx
 184      00
 184 0317 BA010000 	>  movl $strlen12,%edx
 184      00
 184 031c CD80     	>  int $0x80
 185              		Exit $0                                 # –∫–æ–Ω–µ—Ü —Ä–∞–±–æ—Ç—ã, –≤–æ–∑–≤—Ä–∞—Ç –≤ –û–° (–º–∞–∫—
 185 031e B8010000 	>  movl $1,%eax
 185      00
 185 0323 BB000000 	>  movl $0,%ebx
 185      00
 185 0328 CD80     	>  int $0x80
 186              			
 187              	.end                                            # –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–
GAS LISTING task5.S 			page 13


DEFINED SYMBOLS
             task5.S:10     .bss:0000000000000000 buf
             task5.S:10     .bss:0000000000000064 k
             task5.S:11     .bss:0000000000000065 l
             task5.S:17     .data:0000000000000000 result
             task5.S:18     .data:0000000000000004 clean
             task5.S:19     .data:0000000000000008 b
             task5.S:20     .data:0000000000000020 column
             task5.S:21     .data:0000000000000024 string
             task5.S:22     .data:0000000000000028 num
             task5.S:23     .data:000000000000002c A
             task5.S:36     .text:0000000000000000 _start
             task5.S:38     .data:00000000000000bc str0
             task5.S:38     *ABS*:0000000000000019 strlen0
             task5.S:40     .text:0000000000000018 kbd_input_l
             task5.S:183    .text:0000000000000308 stop
             task5.S:56     .text:0000000000000060 sum1
             task5.S:170    .text:00000000000002b0 error1
             task5.S:67     .data:00000000000000d5 str2
             task5.S:67     *ABS*:0000000000000016 strlen2
             task5.S:69     .text:00000000000000a0 kbd_input_k
             task5.S:85     .text:00000000000000e8 sum2
             task5.S:175    .text:00000000000002d0 error2
             task5.S:98     .text:0000000000000117 Next_String1
             task5.S:102    .text:0000000000000119 Next_Row1
             task5.S:120    .text:0000000000000156 Next_String2
             task5.S:130    .text:000000000000016a Next_Row2
             task5.S:179    .text:00000000000002f0 error3
             task5.S:144    .data:00000000000000eb str4
             task5.S:144    *ABS*:0000000000000006 strlen4
             task5.S:146    .text:00000000000001b0 put_out
             task5.S:155    .text:00000000000001d5 check_minus_p5
             task5.S:155    .text:00000000000001e5 place_minus5
             task5.S:155    .text:000000000000020d place_numbers5
             task5.S:155    .data:00000000000000f1 str6
             task5.S:155    *ABS*:0000000000000001 strlen6
             task5.S:155    .text:0000000000000225 out5
             task5.S:157    .text:000000000000022d preinverted7
             task5.S:157    .text:0000000000000245 inverted7
             task5.S:157    .text:0000000000000268 put_out7
             task5.S:158    .data:00000000000000f2 str8
             task5.S:158    *ABS*:0000000000000001 strlen8
             task5.S:161    .text:0000000000000298 cleaning_buf
             task5.S:171    .data:00000000000000f3 str9
             task5.S:171    *ABS*:000000000000001b strlen9
             task5.S:176    .data:000000000000010e str10
             task5.S:176    *ABS*:000000000000001b strlen10
             task5.S:180    .data:0000000000000129 str11
             task5.S:180    *ABS*:0000000000000013 strlen11
             task5.S:184    .data:000000000000013c str12
             task5.S:184    *ABS*:0000000000000001 strlen12

NO UNDEFINED SYMBOLS
