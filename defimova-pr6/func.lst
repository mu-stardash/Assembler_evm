GAS LISTING func.S 			page 1


   1              	/*
   2              	
   3              	    –ü–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ —Å–≤—è–∑—è—Ö
   4              	
   5              	*/
   6              	    .include "my-macro" # –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏
   1              	/* –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã */
   2              	
   3              	.macro Finish
   4              	    movl $0, %ebx 	# first argument: exit code
   5              	    movl $1, %eax 	# sys_exit index
   6              	    int  $0x80 		# kernel interrupt
   7              	.endm
   8              	
   7              	
   8              	.data # —Å–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
   9              	
  10              	
  11              	Symbols:
  12 0000 39314132 	        .asciz  "91A23B456C789" # –º–∞—Å—Å–∏–≤ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤
  12      33423435 
  12      36433738 
  12      3900
  13              	#                                 —Ü–∏—Ñ—Ä –∏ "–Ω–µ —Ü–∏—Ñ—Ä"
  14              	
  15              	lokal:
  16 000e 00000000 		.long 0 # –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ —Å—Ç
  17              	
  18              	.bss    # —Å–µ–∫—Ü–∏—è –æ–±—â–µ–π –ø–∞–º—è—Ç–∏ (–¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
  19              	
  20              	.lcomm  Numbers, 40             # –º–∞—Å—Å–∏–≤ 4-—Ö –±–∞–π—Ç–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Ü–∏—Ñ—Ä
  21              	
  22              	        .text # —Å–µ–∫—Ü–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞
  23              	
  24              	.type   Read_Sym, @function     # —Ñ—É–Ω–∫—Ü–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Å—Å
  25              	
  26              	Read_Sym:
  27              	
  28              	/*
  29              	        –ß–∏—Ç–∞–µ—Ç <–ü–∞—Ä–∞–º–µ—Ç—Ä1> —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ –º–∞—Å—Å–∏–≤–∞ <–ü–∞—Ä–∞–º–µ—Ç—Ä2>
  30              	        –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∏—Ö –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ—É–Ω–∫—Ü–∏–∏ Trans_Sym.
  31              	        –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ Numbers
  32              	*/
  33              	#       –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ–ª–æ–≥ —Ñ—É–Ω—Ü–∏–∏
  34              	
  35 0000 55       	        pushl %ebp       # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å—Ç–µ–∫–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –±—ã–≤—à–µ–µ –≤ –≤—ã–
  36 0001 89E5     	        movl  %esp, %ebp # –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∞–¥—Ä–µ—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
  37              	                         # –ª–æ–∫–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω–Ω—ã–º –≤ —Å—Ç–µ–∫–µ –ø—É—Ç–µ–º –±–∞–
  38              	                         # –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ ebp
  39 0003 83EC0C   	        subl  $12, %esp  # –∑–∞–≤–µ—Å—Ç–∏ —Ç—Ä–∏ 4-—Ö –±–∞–π—Ç–æ–≤—ã—Ö –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–
  40              				 # 1 - —Å—á—ë—Ç—á–∏–∫ –Ω–µ—á–∏—Å–ª–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
  41              				 # 2 - –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç –≤ Numbers
  42              	                         # 3 - –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç —ç–ª–µ–º–Ω—Ç—ã –≤ Symbols
  43              	
  44              	#       –¢–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏
  45              	
  46 0006 29C9     	        subl %ecx, %ecx   # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–∞ —Ü–∏–∫–ª–∞ 
GAS LISTING func.S 			page 2


  47              	
  48              	NextSym:
  49 0008 8B550C   	        movl 12(%ebp), %edx  # –∞–¥—Ä–µ—Å –≤—Ç–æ—Ä–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞-–º–∞—Å—Å–∏–≤–∞ –≤ edx
  50              	
  51              	#       –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ Trans_Sym
  52              	
  53              	
  54              	
  55 000b 29DB     	        subl %ebx, %ebx             # –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ebx –¥–ª—è –∑–∞–ø–∏—Å–∏ —Å–∏–º–≤–æ–ª–∞
  56 000d 8B4DF4   		movl -12(%ebp), %ecx        # –ó–∞–Ω–æ—Å–∏–º –≤ %ecx –∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ—Ç—å–µ–π –ª–æ–∫–∞–ª—å–
  57 0010 8A1C0A   	        movb (%edx,%ecx,1), %bl     # —Å–∏–º–≤–æ–ª –≤ ebx
  58              	
  59 0013 83FB39   		cmpl $'9', %ebx             # –∫–æ–¥ –±–æ–ª—å—à–µ –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ '9' ?
  60 0016 771F     		ja not_num                  # –î–ê - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –º–µ—Ç–∫—É not_num
  61 0018 83FB30   		cmpl $'0', %ebx             # –∫–æ–¥ –º–µ–Ω—å—à–µ –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ '0' ?
  62 001b 721A     		jb not_num                  # –î–ê - –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –º–µ—Ç–∫—É not_num
  63              	
  64              	#       –ù–∞—á–∏–Ω–∞–µ–º –≤—ã–∑–æ–≤ Trans_Sym
  65              	
  66 001d 60       	        pusha   # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä—ã —Ç–µ–∫—É—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ Read_Sym
  67              	
  68 001e 53       	        pushl %ebx                # –ü–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–∏ Trans_Sym (–∫–æ–¥ 
  69              	                                  # —Å–∏–º–≤–æ–ª–∞ –∏–∑ –º–∞—Å—Å–∏–≤–∞) –≤ —Å—Ç–µ–∫
  70 001f E8310000 	        call Trans_Sym
  70      00
  71              	
  72 0024 83C404   	        addl    $4,%esp      # –æ—á–∏c—Ç–∏—Ç—å —Å—Ç–µ–∫ –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Trans_Sym
  73              	
  74 0027 8B4DF8   	        movl -8(%ebp), %ecx 	       # –ó–∞–ø–∏—Å–∞—Ç—å –≤ %ecx –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–π –ª–æ–∫
  75 002a 89048D00 	        movl    %eax, Numbers(,%ecx,4) # –∑–∞–ø–∏—Å–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç Trans-Sym (–≤ –º–∞—Å—Å
  75      000000
  76 0031 8B4DF4   	        movl -12(%ebp), %ecx	       # –ó–∞–ø–∏—Å–∞—Ç—å –≤ %ecx –∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–µ—Ç—å–µ–π –ª–æ
  77              	
  78 0034 61       	        popa   # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä—ã Read_Sym
  79 0035 EB08     		jmp after_trans
  80              	
  81              	not_num:
  82 0037 FF45FC   	        incl -4(%ebp)		       # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–∞ 1 —Å—á–µ—Ç—á–∏–∫ –Ω–µ—á–∏—Å–ª–æ–≤—ã—Ö —
  83 003a FF45F4   		incl -12(%ebp)		       # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º 3 –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –Ω–∞ 1
  84 003d EBC9     		jmp NextSym		       # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –º–µ—Ç–∫—É NextSym
  85              	
  86              	
  87              	after_trans:
  88 003f FF45F8   	        incl  -8(%ebp)	     # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º 2 –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
  89 0042 41       	        incl %ecx            # –Ω–∞—Ä–∞—â–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ü–∏–∫–ª–∞
  90 0043 894DF4   	        movl %ecx, -12(%ebp) # –ó–∞–ø–∏—Å–∞—Ç—å –≤ 3 –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏
  91 0046 8B4DF8   	        movl -8(%ebp),%ecx   # –ó–∞–ø–∏—Å–∞—Ç—å –≤ —Ä–µ–≥–∏—Å—Ç—Ä %ecx –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–
  92 0049 3B4D08   	        cmpl 8(%ebp), %ecx   # —Å—á–µ—Ç—á–∏–∫ —Ä–∞–≤–µ–Ω –ø–µ—Ä–≤–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É?
  93 004c 75BA     	        jne NextSym          # –î–ê, –ø–æ–≤—Ç–æ—Ä—è–µ–º
  94              	                             # –ù–ï–¢ - –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞
  95              	
  96              	#       –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —ç–ø–∏–ª–æ–≥ —Ñ—É–Ω–∫—Ü–∏–∏
  97              	
  98 004e 8B45FC   		movl -4(%ebp), %eax  # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä—É
  99 0051 89EC     	        movl %ebp, %esp      # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–∫–∞
 100 0053 5D       	        popl %ebp            # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ebp
 101 0054 C3       	        ret                  # –≤–æ–∑–≤—Ä–∞—Ç –≤ –≤—ã–∑—ã–≤–∞—é—â—É—é
GAS LISTING func.S 			page 3


 102              	
 103              	# –∫–æ–Ω–µ—Ü Read_Sym
 104              	
 105              	/*
 106              	    –§—É–Ω–∫—Ü–∏—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ –≤ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—
 107              	    <–ü–∞—Ä–µ–º–µ—Ç—Ä1> –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —á–∏—Å–ª–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ eax
 108              	
 109              	.type   Trans_Sym, @function
 110              	
 111              	Trans_Sym:
 112              	
 113              	#       –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ–ª–æ–≥ —Ñ—É–Ω—Ü–∏–∏
 114              	
 115 0055 55       	        pushl %ebp       # —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å—Ç–µ–∫–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –±—ã–≤—à–µ–µ –≤ –≤—ã–
 116 0056 89E5     	        movl  %esp, %ebp # –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∞–¥—Ä–µ—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
 117              	                         # –ª–æ–∫–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω–Ω—ã–º –≤ —Å—Ç–µ–∫–µ –ø—É—Ç–µ–º –±–∞–
 118              	                         # –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ ebp
 119              	
 120              	#       —Ç–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏
 121              	
 122 0058 8B4508   	        movl 8(%ebp), %eax  # –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ eax
 123 005b 83E830   	        subl $0x30, %eax    # –ø–æ–ª—É—á–µ–Ω–∏–µ —á–∏—Å–ª–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
 124              	
 125              	#       –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —ç–ø–∏–ª–æ–≥ —Ñ—É–Ω–∫—Ü–∏–∏
 126              	
 127 005e 89EC     	        movl %ebp, %esp # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–∫–∞
 128 0060 5D       	        popl %ebp       # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ebp
 129 0061 C3       	        ret             # –≤–æ–∑–≤—Ä–∞—Ç –≤ –≤—ã–∑—ã–≤–∞—é—â—É—é
 130              	
 131              	
 132              	.global _start # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –º–µ—Ç–∫–∞
 133              	
 134              	_start:
 135              	
 136 0062 90       	                nop
 137              	
 138 0063 60       	                pusha   # —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –≥–ª–∞–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
 139              	
 140 0064 68000000 	                pushl $Symbols  # –ü–∞—Ä–∞–º–µ—Ç—Ä-2 - –∞–¥—Ä–µ—Å –º–∞—Å—Å–∏–≤–∞ –≤ —Å—Ç–µ–∫
 140      00
 141 0069 6A08     	                pushl $8        # –ü–∞—Ä–∞–º–µ—Ç—Ä-1 –≤ —Å—Ç–µ–∫
 142              	
 143 006b E890FFFF 	                call Read_Sym   # –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏
 143      FF
 144              	
 145 0070 83C408   	                addl $8,%esp    # –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–µ–∫ –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Read_Sym
 146 0073 A30E0000 			movl %eax, lokal # –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π lokal –∏—Å–∫–æ–º–æ–µ –∑–Ω–∞—á–µ–Ω–
 146      00
 147 0078 61       	                popa         # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä—ã –≥–ª–∞–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–
 148              	
 149              	                Finish # –∫–æ–Ω–µ—Ü —Ä–∞–±–æ—Ç—ã, –≤–æ–∑–≤—Ä–∞—Ç –≤ –û–° (–º–∞–∫—Ä–æ –∏–∑ —Ñ–∞–π–ª–
 149 0079 BB000000 	>  movl $0,%ebx
 149      00
 149 007e B8010000 	>  movl $1,%eax
 149      00
 149 0083 CD80     	>  int $0x80
 150              	                .end   # –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
GAS LISTING func.S 			page 4


GAS LISTING func.S 			page 5


DEFINED SYMBOLS
              func.S:11     .data:0000000000000000 Symbols
              func.S:15     .data:000000000000000e lokal
              func.S:20     .bss:0000000000000000 Numbers
              func.S:26     .text:0000000000000000 Read_Sym
              func.S:48     .text:0000000000000008 NextSym
              func.S:81     .text:0000000000000037 not_num
              func.S:111    .text:0000000000000055 Trans_Sym
              func.S:87     .text:000000000000003f after_trans
              func.S:134    .text:0000000000000062 _start

NO UNDEFINED SYMBOLS
