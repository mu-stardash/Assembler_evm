GAS LISTING test.S 			page 1


   1              	.include "my-macro"			# –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏
   1              	/* 
   2              	 * –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.
   3              	 * –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
   4              	 * 	- –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
   5              	 *
   6              	 * –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %e
   7              	 * –°–º. —Ç–∞–∫–∂–µ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              		movl $1, %eax 		    # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ exit –Ω–æ–º–µ—Ä 1
  11              		movl \ret_val, %ebx 	# –∫–æ–¥ –≤—ã—Ö–æ–¥–∞
  12              		int $0x80 		        # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  13              	.endm  
  14              	
  15              	/*
  16              	* –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Å–∏
  17              	—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞
  18              	* –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  19              	* - –∞–¥—Ä–µ—Å –±—É—Ñ—Ñ–µ—Ä–∞ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–∞
  20              	* –†–µ–∑—É–ª—å—Ç–∞—Ç:
  21              	* - –≤ %eax –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
  22              	* - –ø–æ –∞–¥—Ä–µ—Å—É buf_addr - —Å—á–∏—Ç–∞–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª
  23              	*
  24              	* –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %ea
  25              	%edx
  26              	* –°–º. —Ç–∞–∫–∂–µ 'man 2 read'
  27              	*/
  28              	.macro Getchar buf_addr
  29              		movl $3, %eax		# –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ read
  30              		movl $0, %ebx		# –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞
  31              		movl \buf_addr, %ecx	# –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –±—É—Ñ–µ—Ä–∞ (–æ–Ω –∂–µ - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫
  32              		     			        # –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞)
  33              		movl $1, %edx		# –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏—è
  34              		int $0x80		    # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  35              	.endm
  36              	
  37              	/*
  38              	* –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –≤ —Å—Ç–∞–Ω–
  39              	* –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  40              	* - –°—Ç—Ä–æ–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞.
  41              	*
  42              	* –ü—Ä–∏–º–µ—Ç—Ä –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞:
  43              	* Puts "–¢–µ–∫—Å—Ç –≤—ã–≤–æ–¥–∏–º–æ–π —Å—Ç—Ä–æ–∫–∏"
  44              	*
  45              	* –†–µ–∑—É–ª—å—Ç–∞—Ç:
  46              	* - –≤—ã–≤–æ–¥–∏—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ —Å–∏–º–≤–æ–ª—ã –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–
  47              	* –∞ —Ç–∞–∫–∂–µ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏
  48              	*
  49              	* –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤–∞ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä—ã: %ea
  50              	%edx
  51              	* –°–º. —Ç–∞–∫–∂–µ 'man puts', 'man 2 write'
  52              	*/
  53              	.macro Puts string
  54              	.data
  55              		str\@: .ascii "\string\n" # —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –≤
  56              	
GAS LISTING test.S 			page 2


  57              		strlen\@ = . - str\@ # –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏
  58              	
  59              	.text
  60              	    movl $4, %eax		# –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ write
  61              		movl $1, %ebx		# –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞	
  62              		movl $str\@, %ecx	# –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –ø–∞–º—è—Ç–∏ —Å –≤—ã–≤–æ–¥–∏–º—ã–º–∏ —Å–∏–º–≤–æ
  63              		movl $strlen\@, %edx 	# –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤ –¥–ª—è –≤—ã–≤–æ–¥–∞
  64              		int $0x80		    # –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
  65              	.endm
  66              	
  67              	/*
  68              	* –ú–∞–∫—Ä–æ—Å –≤—ã–≤–æ–¥–∞ —á–∏—Å–ª–∞ –≤ —Å–∏—Å—Ç–µ–º–µ —Å—á–∏—Å–ª–µ–Ω–∏—è counts
  69              	* –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
  70              	* - —á–∏—Å–ª–æ –¥–ª—è –≤—ã–≤–æ–¥–∞ - num
  71              	* - —Å–∏—Å—Ç–µ–º–∞ –∏—Å—á–∏—Å–ª–µ–Ω–∏—è - dec
  72              	*/
  73              	.macro Putnum compos counts
  74              	.data
  75              	
  76              		str\@: .ascii " " # —Å—Ç—Ä–æ–∫–æ–≤–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞
  77              	.text
  78              	
  79              	preparation_div\@:
  80              	
  81              		sub %edi, %edi   # —Å—á–µ—Ç—á–∏–∫ –¥–µ–ª–µ–Ω–∏—è. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞–≤–µ–Ω 0
  82              		movl $0x11, %esi # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –≤ —Å—Ç—Ä–æ–∫–µ
  83              		movl \compos, %eax # –≥–æ—Ç–æ–≤–∏–º –¥–µ–ª–µ–Ω–∏–µ (–≤ eax –ø–æ–º–µ—â–∞–µ–º –Ω–∞—à–µ –ø—Ä–æ–∏–∑–≤–
  84              	
  85              	next_digit\@:
  86              	
  87              		movl $0, %edx    # –≥–æ—Ç–æ–≤–∏–º  –¥–µ–ª–µ–Ω–∏–µ
  88              		idivl \counts    # –¥–µ–ª–∏–º –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ, —á–∞—Å—Ç–Ω–æ–µ —É—Ö–æ–¥–∏—Ç –≤ ax, –æ—Å—Ç–∞
  89              		decl %esi        # —É–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –≤ —Å
  90              		incl %edi        # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –¥–µ–ª–µ–Ω–∏–π
  91              		movb %dl, str\@(%esi) # –ø–æ–º–µ—â–∞–µ–º –≤ —Å—Ç—Ä–æ–∫—É –æ—Å—Ç–∞—Ç–æ–∫
  92              		addb $0x30, str\@(%esi) # –ø–æ–ª—É—á–∞–µ–º —Å–∏–º–≤–æ–ª
  93              	
  94              		cmpl $0 , %eax   # —á–∞—Å—Ç–Ω–æ–µ = 0?
  95              		je print_dig\@   # –î–ê - –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏
  96              		jmp next_digit\@ # –ù–ï–¢ - –ø—Ä–æ–¥–æ–ª–∂–≤–µ–º –¥–µ–ª–∏—Ç—å
  97              	
  98              	print_dig\@:
  99              		movl $4, %eax     # –Ω–æ–º–µ—Ä —Å–∏—Å—Ç. –≤—ã–∑–æ–≤–∞ write
 100              		movl $1, %ebx     # –ø–∞—Ä–∞–º–µ—Ç—Ä 1: –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
 101              		movl $str\@, %ecx # –ø–∞—Ä–∞–º–µ—Ç—Ä 2: –∞–¥—Ä–µ—Å –ø–∞–º—è—Ç–∏ —Å –≤—ã–≤–æ–¥–∏–º—ã–º–∏ —Å–∏–º–≤–æ
 102              		addl %esi, %ecx   
 103              		movl %edi, %edx   # –ø–∞—Ä–∞–º–µ—Ç—Ä 3: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–≤–æ–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
 104              		int $0x80
 105              	
 106              	.endm
   2              	
   3              	.bss						# —Å–µ–∫—Ü–∏—è –æ–±—â–µ–π –ø–∞–º—è—Ç–∏
   4              		.lcomm c, 1
   5              		.lcomm buf, 100
   6              		
   7              	.data						# —Å–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
   8              	
GAS LISTING test.S 			page 3


   9 0000 0A000000 	dec:	 .long 10           
  10 0004 00000000 	num:	 .long 0			# –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
  11              	
  12              	.text						# —Å–µ–∫—Ü–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞
  13              	
  14              	.type Factorial, @function  # —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞
  15              		
  16              	Factorial:
  17              	
  18 0000 55       		pushl %ebp				# —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å—Ç–µ–∫–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –±—ã–≤—à–µ–µ –≤ –≤—ã–∑—ã–≤–∞—é—
  19 0001 89E5     		movl %esp, %ebp			# –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∞–¥—Ä–µ—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –∏ 
  20              	                            # –ª–æ–∫–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω–Ω—ã–º –≤ —Å—Ç–µ–∫–µ –ø—É—Ç–µ–º –±
  21              	                            # –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ ebp
  22 0003 8B4508   		movl 8(%ebp), %eax      # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ–ª–æ–≥
  23 0006 83F801   		cmpl $1, %eax			# –í–≤–µ–ª–∏ 1?
  24 0009 7413     		je return				# –î–ê - –≤–µ—Ä–Ω–µ–º 1
  25 000b 48       		decl %eax				# —É–º–µ–Ω—å—à–∞–µ–º —á–∏—Å–ª–æ –Ω–∞ 1
  26 000c 50       		pushl %eax				# —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Å—Ç–µ–∫–µ –∑–Ω–∞—á–µ–Ω–∏–µ —á–∏—Å–ª–∞
  27 000d E8EEFFFF 		call Factorial			# –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏
  27      FF
  28 0012 83C404   		addl $4, %esp			# –æ—á–∏c—Ç–∏—Ç—å —Å—Ç–µ–∫ –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Factorial
  29 0015 F76D08   		imull 8(%ebp)			# –Ω–∞—Ö–æ–¥–∏–º –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
  30 0018 0F828F00 		jc overflow				# –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–æ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≤—
  30      0000
  31              	
  32              	return:
  33              	
  34 001e 89EC     		movl %ebp, %esp			# –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–∫–∞
  35 0020 5D       		popl %ebp				# –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ebp
  36 0021 C3       		ret						# –≤–æ–∑–≤—Ä–∞—Ç –≤ –≤—ã–∑—ã–≤–∞—é—â—É—é
  37              	
  38              	
  39              	.global _start				# —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –º–µ—Ç–∫–∞
  40              	
  41              	_start:
  42              	
  43 0022 90       		nop
  44              		#xor %eax, %eax			# –ø–æ–∏–±—Ç–æ–≤–æ –æ–±–Ω—É–ª—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä
  45 0023 89C0     		mov %eax, %eax          # –æ–±–Ω—É–ª—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä
  46              	
  47              	input:
  48              	
  49 0025 60       		pusha					# —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –≥–ª–∞–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
  50              		Getchar $c				# –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤ –≤–≤–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–
  50 0026 B8030000 	>  movl $3,%eax
  50      00
  50 002b BB000000 	>  movl $0,%ebx
  50      00
  50 0030 B9000000 	>  movl $c,%ecx
  50      00
  50              	>  
  50 0035 BA010000 	>  movl $1,%edx
  50      00
  50 003a CD80     	>  int $0x80
  51 003c 61       		popa					# –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä—ã –≥–ª–∞–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º—ã
  52 003d 833D0000 		cmpl $'\n', c			# —ç—Ç–æ —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ ?
  52      00000A
GAS LISTING test.S 			page 4


  53 0044 7415     		je calc					# –î–ê - –Ω–∞ –º–µ—Ç–∫—É calc
  54 0046 8B0D0000 		movl dec, %ecx			# –ø–æ–º–µ—â–∞–µ–º –≤ %ecx –∑–Ω–∞—á–µ–Ω–∏–µ dec
  54      0000
  55 004c F7E9     		imul %ecx				# —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ 10, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞–∑—
  56 004e 8A1D0000 		movb c, %bl				# –∫–æ–¥ –∏–∑ c –ø–∏—à–µ–º –≤ bl
  56      0000
  57 0054 83EB30   		subl $48, %ebx			# –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ–º –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞ —Ü–∏—Ñ—Ä—ã –≤ —Å–∞–º–æ —á–
  58 0057 01D8     		addl %ebx, %eax			# —Å–∫–ª–∞–¥—ã–≤–∞–µ–º, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –≤–≤–µ–¥–µ–Ω–Ω–æ–µ —á–∏—Å–ª–
  59 0059 EBCA     		jmp input				# –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ input
  60              	
  61              	calc:
  62 005b 50       		push %eax				# —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –≤ —Å—Ç–µ–∫–µ
  63 005c E89FFFFF 		call Factorial			# –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏
  63      FF
  64 0061 83C404   		addl $4, %esp			# –æ—á–∏c—Ç–∏—Ç—å —Å—Ç–µ–∫ –æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Factorial
  65 0064 A3040000 		movl %eax, num			# –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π num –∏—Å–∫–æ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  65      00
  66              		Putnum num dec			# –º–∞–∫—Ä–æ–≤—ã–∑–æ–≤ –≤—ã–≤–æ–¥–∞ —á–∏—Å–ª–∞ –≤ 10 —Å.—Å.
  66              	> .data
  66              	> 
  66 0008 20       	>  str1:.ascii " "
  66              	> .text
  66              	> 
  66              	> preparation_div1:
  66              	> 
  66 0069 29FF     	>  sub %edi,%edi
  66 006b BE110000 	>  movl $0x11,%esi
  66      00
  66 0070 A1040000 	>  movl num,%eax
  66      00
  66              	> 
  66              	> next_digit1:
  66              	> 
  66 0075 BA000000 	>  movl $0,%edx
  66      00
  66 007a F73D0000 	>  idivl dec
  66      0000
  66 0080 4E       	>  decl %esi
  66 0081 47       	>  incl %edi
  66 0082 88960800 	>  movb %dl,str1(%esi)
  66      0000
  66 0088 80860800 	>  addb $0x30,str1(%esi)
  66      000030
  66              	> 
  66 008f 83F800   	>  cmpl $0,%eax
  66 0092 7402     	>  je print_dig1
  66 0094 EBDF     	>  jmp next_digit1
  66              	> 
  66              	> print_dig1:
  66 0096 B8040000 	>  movl $4,%eax
  66      00
  66 009b BB010000 	>  movl $1,%ebx
  66      00
  66 00a0 B9080000 	>  movl $str1,%ecx
  66      00
  66 00a5 01F1     	>  addl %esi,%ecx
  66 00a7 89FA     	>  movl %edi,%edx
GAS LISTING test.S 			page 5


  66 00a9 CD80     	>  int $0x80
  66              	> 
  67              		#Puts ""					#
  68 00ab EB16     		jmp stop				# –Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
  69              	
  70              	overflow:
  71              		Puts "Overflow!"        # –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏
  71              	> .data
  71 0009 4F766572 	>  str2:.ascii "Overflow!\n"
  71      666C6F77 
  71      210A
  71              	> 
  71              	>  strlen2 =. - str2
  71              	> 
  71              	> .text
  71 00ad B8040000 	>  movl $4,%eax
  71      00
  71 00b2 BB010000 	>  movl $1,%ebx
  71      00
  71 00b7 B9090000 	>  movl $str2,%ecx
  71      00
  71 00bc BA0A0000 	>  movl $strlen2,%edx
  71      00
  71 00c1 CD80     	>  int $0x80
  72              	
  73              	stop:	
  74              		Exit $0
  74 00c3 B8010000 	>  movl $1,%eax
  74      00
  74 00c8 BB000000 	>  movl $0,%ebx
  74      00
  74 00cd CD80     	>  int $0x80
  75              	.end						# –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞	
GAS LISTING test.S 			page 6


DEFINED SYMBOLS
                             .bss:0000000000000000 c
              test.S:5      .bss:0000000000000008 buf
              test.S:9      .data:0000000000000000 dec
              test.S:10     .data:0000000000000004 num
              test.S:16     .text:0000000000000000 Factorial
              test.S:32     .text:000000000000001e return
              test.S:70     .text:00000000000000ad overflow
              test.S:41     .text:0000000000000022 _start
              test.S:47     .text:0000000000000025 input
              test.S:61     .text:000000000000005b calc
              test.S:66     .data:0000000000000008 str1
              test.S:66     .text:0000000000000069 preparation_div1
              test.S:66     .text:0000000000000075 next_digit1
              test.S:66     .text:0000000000000096 print_dig1
              test.S:73     .text:00000000000000c3 stop
              test.S:71     .data:0000000000000009 str2
              test.S:71     *ABS*:000000000000000a strlen2

NO UNDEFINED SYMBOLS
